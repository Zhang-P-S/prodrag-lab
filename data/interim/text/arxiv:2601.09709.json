{"doc_id": "arxiv:2601.09709", "source": "arxiv", "lang": "en", "pdf_path": "data/raw/arxiv/pdf/2601.09709.pdf", "meta": {"doc_id": "arxiv:2601.09709", "source": "arxiv", "arxiv_id": "2601.09709", "title": "Social Determinants of Health Prediction for ICD-9 Code with Reasoning Models", "authors": ["Sharim Khan", "Paul Landes", "Adam Cross", "Jimeng Sun"], "published": "2025-12-14T17:15:17Z", "updated": "2025-12-14T17:15:17Z", "summary": "Social Determinants of Health correlate with patient outcomes but are rarely captured in structured data. Recent attention has been given to automatically extracting these markers from clinical text to supplement diagnostic systems with knowledge of patients' social circumstances. Large language models demonstrate strong performance in identifying Social Determinants of Health labels from sentences. However, prediction in large admissions or longitudinal notes is challenging given long distance dependencies. In this paper, we explore hospital admission multi-label Social Determinants of Health ICD-9 code classification on the MIMIC-III dataset using reasoning models and traditional large language models. We exploit existing ICD-9 codes for prediction on admissions, which achieved an 89% F1. Our contributions include our findings, missing SDoH codes in 139 admissions, and code to reproduce the results.", "query": "(cat:cs.CL OR cat:cs.LG) AND (all:\"large language model\" OR all:LLM) AND (all:medical OR all:clinical OR all:healthcare)", "url_abs": "http://arxiv.org/abs/2601.09709v1", "url_pdf": "https://arxiv.org/pdf/2601.09709.pdf", "meta_path": "data/raw/arxiv/meta/2601.09709.json", "sha256": "9eb721e096badf230ebcff7d797c4e0dcd4d500d45e1788b095a9e1b68524583", "status": "ok", "fetched_at": "2026-02-18T02:24:19.790145+00:00"}, "pages": [{"page": 1, "text": "ML4H 2025 - Findings Track\nMachine Learning for Health (ML4H) 2025\nSocial Determinants of Health Prediction\nfor ICD-9 Code with Reasoning Models\nSharim Khan\nsharimk2@illinois.edu\nUniversity of Illinois, Urbana-Champaign, USA\nPaul Landes\nplande2@uic.edu\nUniversity of Illinois Chicago, Chicago, USA\nAdam Cross\narcross@uic.edu\nUniversity of Illinois Chicago, Peoria, USA\nJimeng Sun\njimeng@illinois.edu\nUniversity of Illinois, Urbana-Champaign, USA\nAbstract\nSocial Determinants of Health correlate with\npatient outcomes but are rarely captured in\nstructured data.\nRecent attention has been\ngiven to automatically extracting these mark-\ners from clinical text to supplement diagnos-\ntic systems with knowledge of patients’ social\ncircumstances. Large language models demon-\nstrate strong performance in identifying Social\nDeterminants of Health labels from sentences.\nHowever, prediction in large admissions or lon-\ngitudinal notes is challenging given long dis-\ntance dependencies. In this paper, we explore\nhospital admission multi-label Social Determi-\nnants of Health ICD-9 code classiﬁcation on the\nMIMIC-III dataset using reasoning models and\ntraditional large language models. We exploit\nexisting ICD-9 codes for prediction on admis-\nsions, which achieved a 89% F1. Our contribu-\ntions include our ﬁndings, missing SDoH codes\nin 139 admissions, and code to reproduce the\nresults.\nKeywords:\nSocial determinants of health;\nICD-9 V-codes; clinical notes; large language\nmodels; MIMIC-III;\nData and Code Availability\nThis study used\nthe publicly available, de-identiﬁed MIMIC-III v1.4\ndataset, accessed under the PhysioNet Data Use\nAgreement.\nAccess requires completion of creden-\ntialing and training as speciﬁed by PhysioNet. The\nfull evaluation code and prompt templates are also\navailable1.\n1. https://github.com/sharimk2/icd9 llm prediction\nLanguage \nModels\nMIMIC-III\nClinical Notes\nProgress\nImaging\nRadiology\nICD-9 Diagnosis \nCodes\n079.99\nV60.0\n250.13\nV15.41\nV60.2\n530.81\nV-codes (SDoH)\nFigure 1: Free text clinical notes, and ICD-9 V-\ncodes, are used as gold labels for prediction\nand to identify SDoH marked admissions.\nInstitutional Review Board (IRB)\nThe analy-\nses were conducted using de-identiﬁed secondary data\n(MIMIC-III) and did not involve interaction with hu-\nman participants.\nIn accordance with institutional\npolicy, this work does not constitute human subjects\nresearch and therefore did not require IRB review.\n1. Introduction\nSocial Determinants of Health (SDoH) are non-\nmedical factors that account for an estimated 80–90%\n© S. Khan, P. Landes, A. Cross & J. Sun.\narXiv:2601.09709v1  [cs.LG]  14 Dec 2025\n"}, {"page": 2, "text": "SDoH ICD-9 Code Predictions with LLMs\nof modiﬁable contributors to health outcomes and\ndisparities (MI Multipayer Initiatives, 2024). SDoHs\nmay be adverse or protective. Adverse SDoHs are fac-\ntors that create an additional social work or resource\nsupport need for patients (Guevara et al., 2024).\nHealthcare providers often document these factors\nin unstructured notes in Electronic Health Records,\nwhich limits their utility.\nThe International Clas-\nsiﬁcation of Diseases, Ninth Revision (ICD-9) clas-\nsiﬁcation system includes V-codes designed to cap-\nture social circumstances such as homelessness, un-\nemployment, and inadequate family support. How-\never, physicians diagnose SDoH V-codes as little\nas 2%, even in populations with documented social\nneeds (Torres et al., 2017; Hatef et al., 2019).\nThis underutilization often stems from document-\ning social risk factors within clinical narratives, which\nrequire substantial time and expertise to diagnose as\nbilling codes (Torres et al., 2017). Reasoning-capable\nlanguage models present an opportunity to predict\nSDoH by using coding guidelines in prompts and\ntraining on V-codes (a subset of ICD-9 codes used\nby insurance companies for billing) as labels already\ndiagnosed by physicians in the MIMIC-III dataset as\nshown in Figure 1.\nExisting large language models (LLMs) studies\non SDoH classify text into broad social risk cate-\ngories such as housing or social support, as shown by\nGuevara et al. (2024). This approach does not oper-\nate at the admission level nor predict speciﬁc billing\ncodes. In contrast, our work directly predicts ﬁne-\ngrained ICD-9 V-codes from the entire set of clini-\ncal documents for an admission, bridging the gap be-\ntween unstructured SDoH documentation and struc-\ntured diagnostic coding.\nThe semantics of the clinical notes with the di-\nagnosed ICD-9 V-codes map to the descriptions of\nthe labels from the annotation guide provided by\nGuevara et al. (2024) as shown in Table 1. Undomi-\nciled and unemployed are the only adverse SDoH cat-\negories with overlap between this study and the work\ndone by Guevara et al. (2024). This study evaluates\nthe feasibility and performance of reasoning language\nmodels to predict V-codes from clinical documenta-\ntion across open-source and closed frontier models.\n2. Related Work\nInitial\napproaches\nto\nSDoH\nidentiﬁcation\nem-\nployed rule-based systems and traditional machine\nlearning methods to detect SDoH from clinical\nGuevara Label\nV-code\nZ-code\nUndomiciled\nHomelessness (V60.0)\nZ59\nUnemployed\nUnemployment (V62.0)\nZ56\nTable 1: Mapping from Guevara et al. (2024) SDoH\nlabels to ICD-9 V-codes and ICD-10 Z-\ncodes.\nDomain\nDescription\nCode\nHousing &\nResources\nHomelessness\nV60.0\nInadequate material resources\nV60.2\nNo family caregiver\nV60.4\nEmployment\nUnemployment\nV62.0\nLegal\nLegal problems\nV62.5\nAbuse History\nPhysical/sexual abuse\nV15.41\nEmotional abuse\nV15.42\nFamily History\nFamily alcoholism\nV61.41\nTable 2: Social Determinants of Health ICD-9 V-\ncode taxonomy by domain.\ntext (Chen et al., 2020).\nHowever, these meth-\nods demonstrated limited generalizability due to\ninstitution-speciﬁc documentation patterns.\nSub-\nsequent advances in neural architectures, includ-\ning convolutional models\n(Mullenbach et al., 2018)\nand transformer architectures such as ClinicalBERT\n(Alsentzer et al., 2019), improved automated medi-\ncal coding performance on diagnosis and procedure\ncodes.\nResearchers have explored large language mod-\nels for SDoH mention classiﬁcation in clinical notes.\nGuevara et al. (2024) achieved 70% macro-F1 for ad-\nverse SDoH classiﬁcation at the sentence-level. Their\nwork identiﬁed 93.8% of patients with adverse SDoH\ncompared to 2.0% captured by ICD-10 codes. Their\ntaxonomy of labels maps to broad ICD-10 Z-code cat-\negories.\nHybrid architectures combining language models\nwith traditional neural networks have demonstrated\nimprovements in both accuracy and computational\neﬃciency for SDoH extraction (Landes et al., 2025).\n2\n"}, {"page": 3, "text": "SDoH ICD-9 Code Predictions with LLMs\nModel\nParameters\nEM\nwP\nwR\nwF1\nmP\nmR\nmF1\nMP\nMR\nMF1\nFrontier models\nGPT-3.5-turbo\nUnknown\n0.144\n0.718\n0.338\n0.452\n0.529\n0.338\n0.413\n0.208\n0.162\n0.167\nGPT-4o-mini\nUnknown\n0.691\n0.864\n0.870\n0.855\n0.845\n0.870\n0.857\n0.719\n0.642\n0.645\nGPT-5-mini\nUnknown\n0.722\n0.939\n0.847\n0.882\n0.939\n0.847\n0.891\n0.797\n0.608\n0.665\nOpen-source models\nLlama-3.1\n8B\n0.103\n0.527\n0.765\n0.573\n0.412\n0.765\n0.536\n0.383\n0.521\n0.351\nLlama-3.3\n70B\n0.355\n0.765\n0.850\n0.740\n0.598\n0.850\n0.702\n0.678\n0.663\n0.573\nQwen3\n32B\n0.655\n0.918\n0.770\n0.829\n0.925\n0.770\n0.840\n0.769\n0.577\n0.644\nGPT-OSS\n20B\n0.652\n0.896\n0.775\n0.824\n0.952\n0.775\n0.854\n0.795\n0.580\n0.652\nTable 3: Model results metrics on SDoH code prediction. Metrics include (E)xact (M)atch, (P)recision,\n(R)ecall, and F1 scores reported as (w)eighted, (m)icro, and (M)acro averages. Model parameters\nshown in billions (B). Bolded measures indicate the highest performing for each subgroup.\n3. Dataset\nUnstructured free text clinical notes from the Medi-\ncal Information Mart for Intensive Care (MIMIC-III\nv1.4) was used as input to several LLMs. MIMIC-III\nis a publicly available dataset containing de-identiﬁed\nhealth records from over 58,000 hospital admissions\nat Beth Israel Deaconess Medical Center between\n2001 and 2012 (Johnson et al., 2016). We predicted\nICD-9 V-codes2 identiﬁed as SDoH by Torres et al.\n(2017), eight of which were found in the MIMIC-III\ndataset and listed in Table 2.\nEvaluation Dataset\nThe evaluation dataset com-\nprised 139 MIMIC-III admissions selected to capture\nvaried SDoH documentation patterns. Selection cri-\nteria included admissions with existing V-code as-\nsignments as well as admissions without SDoH codes.\nWe sampled 357 admissions with at least 500 char-\nacters from discharge summaries, nursing notes, and\nsocial work evaluation note categories.\n4. Experimental Setup\nWe identiﬁed admissions with notes containing the\nV-codes listed in Table 2 or SDoHs not diagnosed\nby physicians. We labeled these admissions with the\nadditional V-codes for related SDoHs, which we re-\nfer to this as “amended codes”. For example, “He\nis unemployed and receives SSI secondary to anxi-\nety, problems with depth perception,” appears in an\nadmission only labeled with homelessness (V60.0).\nThe unemployed token is a clear indication of a\n2. MIMIC-III predates the 2015 ICD-10 transition.\nunemployment (V62.0), but is missing from the ad-\nmission, and therefore, added as an amended code.\nWe evaluate the models on the amended codes to\navoid penalizing for missing undiagnosed SDoHs.\nThe procured dataset is available via PyHealth\n(Yang et al., 2023)\nPrompting\nFew-shot\nprompting\n(Brown et al.,\n2020) is used to predict SDoH labels from clinical\ndocumentation. Our prompts’ role is a certiﬁed medi-\ncal coder, specify labeling criteria, and include coding\nexample (both positive and negative). Our prompts\nare given in Appendix A.\nEvaluation\nWe\nevaluated\nseven\nLLMs\nspan-\nning frontier closed-source, open-source, reasoning-\ncapable, and traditional architectures on multi-label\nclassiﬁcation of V-codes that represent adverse SDoH\nlabels. We processed each clinical note through the\nmodel independently across admission, then aggre-\ngated predictions at the admission level.\n5. Results\nThe results of the models we tested are in Ta-\nble 3. GPT-5-mini achieved the highest overall per-\nformance with 72.2% exact match and 89.1% micro-\nF1, which demonstrates frontier models’ capability in\nextracting V-codes in clinical documentation. Open-\nsource models demonstrated competitive capabilities,\nwith Qwen3-32B and GPT-OSS-20B achieving exact\nmatch scores of 65.5% and 65.2%, respectively. This\nperformance suggests that eﬀective SDoH prediction\ndoes not require proprietary systems.\n3\n"}, {"page": 4, "text": "SDoH ICD-9 Code Predictions with LLMs\nTraditional language models showed signiﬁcantly\nlower performance, with Llama-3.3-70B and GPT-3.5\nachieving exact match scores of 35.5% and 14.4%, re-\nspectively. The performance diﬀerence between tra-\nditional and reasoning-capable models indicates that\nmulti-label SDoH classiﬁcation presents challenges\nthat beneﬁt from advanced reasoning capabilities,\nparticularly when processing lengthy clinical narra-\ntives with distributed evidence.\nReasoning models leverage the chain-of-thought,\nwhich is a series of intermediate reasoning steps\nthe\nmodel\nperforms\nbefore\nproducing\nan\nout-\nput (Wei et al., 2023).\nThese models perform bet-\nter given the length of the prompt, and complexity\nof conjunctions (i.e. inclusion and exclusion clauses),\nand negative examples.\nFor example, our prompt\ncontains hierarchical code exclusion rules (such as\nidentifying homelessness in an example, but in-\nstructing the exclusion of inadequate material\nresources).\nLabel-Speciﬁc Performance\nGPT-5-mini’s per-\nformance\nvaried\nacross\nSDoH\ncategories\n(Ta-\nble\n4).\nThe\nmodel\nachieved\nhigh\nperfor-\nmance for homelessness and family alcoholism,\nwhere documentation typically follows consistent\nterminology.\nModerate\nperformance\nwas\nob-\nserved for unemployment and inadequate material\nresources.\nPerformance decreased for labels re-\nquiring inference across scattered evidence, includ-\ning no family caregiver, legal problems, and\nemotional abuse. While this pattern suggests labels\nwith explicit documentation are more reliably pre-\ndicted, the conservative prompting strategy for codes\nwith low support may have limited the model’s ability\nto capture more nuanced cases, and further prompt\noptimization could improve performance on complex\ninference tasks.\nEvaluation Against Original Coding\nWe eval-\nuated model performance on the amended codes and\nthe non-amended codes (Table 5). Evaluated on the\namended codes, GPT-5-mini achieved 72.2% exact\nmatch and 89.1% micro-F1.\nPerformance against\nnon-amended codes showed 48.9% exact match and\n67.0% micro-F1. The diﬀerence in performance re-\nﬂects instances where clinical notes contained evi-\ndence for additional SDoH labels beyond those origi-\nnally diagnosed.\n6. Discussion\nThe evaluation metrics support that LLMs can pre-\ndict adverse SDoH V-codes from clinical notes with\nhigh accuracy (89.1% micro-F1).\nFurthermore, we\nidentiﬁed clinical notes that contained adverse SDoH\nsemantics beyond those originally diagnosed.\nThe\nperformance diﬀerence between the prediction of\namended codes and the non-amended codes suggests\nnon-agreement in the diagnosis of V-codes among\nphysicians. There is potential for these multi-label\nclassiﬁcation models to bridge the gap between un-\nstructured documentation of SDoHs and missed di-\nagnoses.\nThe model performed best on labels with stan-\ndard terminology and struggled with recall when doc-\numentation varied, such as history of emotional\nabuse. However, further experimentation is needed\nimprove precision-recall tradeoﬀ. Open-source mod-\nels demonstrated competitive performance, suggest-\ning eﬀective V-code prediction may be achievable\nwithout requiring commercial models.\nCode\nPrecision (%)\nRecall (%)\nF1 (%)\nCount\nHomelessness (V60.0)\n100.0\n94.8\n97.4\n97\nInadequate material resources (V60.2)\n100.0\n70.8\n82.8\n8\nNo family caregiver (V60.4)\n95.8\n52.8\n67.5\n12\nUnemployment (V62.0)\n95.9\n84.5\n89.9\n28\nLegal problems (V62.5)\n56.1\n45.2\n50.0\n14\nPhysical abuse (V15.41)\n72.3\n73.8\n73.0\n14\nEmotional abuse (V15.42)\n100.0\n25.0\n40.0\n4\nFamily alcoholism (V61.41)\n96.8\n100.0\n98.4\n30\nTable 4: By code performance of GPT-5-mini on the evaluation dataset and count of admissions containing\nthe code.\n4\n"}, {"page": 5, "text": "SDoH ICD-9 Code Predictions with LLMs\n7. Conclusion\nReasoning LLMs can eﬀectively predict adverse\nSDoH labels from clinical documentation through\nfew-shot prompting approaches.\nThe competitive\nperformance of open-source models compared to com-\nmercial models demonstrates that eﬀective SDoH pre-\ndiction does not require proprietary systems, making\nthese capabilities accessible to resource-constrained\nhealthcare settings. Our identiﬁcation of admissions\nwith documented but uncoded SDoH factors high-\nlights a gap between clinical documentation and cod-\ning practices. As healthcare systems increasingly rec-\nognize SDoH as critical quality indicators, classiﬁca-\ntion models can improve both clinical care and pop-\nulation health management.\n8. Limitations\nThe use of MIMIC-III admissions potentially lim-\nits generalizability to other institutions with varied\ndocumentation practices. The study examined eight\nICD-9 V-codes, a subset of available SDoH codes.\nThe evaluation dataset was developed by a single an-\nnotator without an inter-rater reliability assessment.\nThe notes used in our experiments are limited to\nthose exported in the MIMIC-III dataset, which in-\nclude only discharge summaries and those from the\nICU department Landes et al. (2022). Notes during\nthe hospital stay for patients that are moved to other\ndepartments during their recovery are omitted and\nlikely have an impact on model performance.\n9. Acknowledgments\nThis work was funded by an award from the Center\nfor Health Equity using Machine Learning and Ar-\ntiﬁcial Intelligence (CHEMA) postdoctoral funding\naward at the University of Illinois Chicago.\nMetric\nAmended\nNon-Amended\nExact Match\n72.2\n48.9\nMacro-F1\n66.5\n32.2\nMicro-F1\n89.1\n67.0\nTable 5: GPT-5-mini multi-label classiﬁcation per-\nformance against the amended codes versus\nnon-amended diagnoses codes\nReferences\nEmily Alsentzer, John R. Murphy, Willie Boag,\nWei-Hung\nWeng,\nDi\nJin,\nTristan\nNaumann,\nand\nMatthew\nB.\nA.\nMcDermott.\nPub-\nlicly\navailable\nclinical\nBERT\nembeddings.\narXiv preprint arXiv:1904.03323,\n2019.\nURL\nhttps://arxiv.org/abs/1904.03323.\nTom B. Brown,\nBenjamin Mann,\nNick Ryder,\nMelanie Subbiah, Jared Kaplan, Prafulla Dhariwal,\nArvind Neelakantan, Pranav Shyam, Girish Sastry,\nAmanda Askell, Sandhini Agarwal, Ariel Herbert-\nVoss, Gretchen Krueger, Tom Henighan, Rewon\nChild, Aditya Ramesh, Daniel M. Ziegler, Jeﬀrey\nWu, Clemens Winter, Christopher Hesse, Mark\nChen, Eric Sigler, Mateusz Litwin, Scott Gray,\nBenjamin Chess, Jack Clark, Christopher Berner,\nSam McCandlish, Alec Radford, Ilya Sutskever,\nand Dario Amodei. Language models are few-shot\nlearners. In Proceedings of the 34th International\nConference on Neural Information Processing Sys-\ntems, NeurIPS ’20, Red Hook, NY, USA, 2020.\nCurran Associates Inc.\nMin Chen, Xuemei Tan, and Rema Padman.\nSo-\ncial determinants of health in electronic health\nrecords and their impact on analysis and risk pre-\ndiction:\nA systematic review.\nJournal of the\nAmerican Medical Informatics Association, 27(11):\n1764–1773, November 2020. doi: 10.1093/jamia/\nocaa143.\nMarco\nGuevara,\nShan\nChen,\nSpencer\nThomas,\nTafadzwa L. Chaunzwa, Idalid Franco, Benjamin\nKann, Shalini Moningi, Jack Qian, Madeleine\nGoldstein, Susan Harper, Hugo J. W. L. Aerts,\nGuergana K. Savova, Raymond H. Mak, and\nDanielle S. Bitterman. Large language models to\nidentify social determinants of health in electronic\nhealth records. npj Digital Medicine, 7(1):—, 2024.\ndoi: 10.1038/s41746-023-00970-0.\nElham Hatef, Masoud Rouhizadeh, Iddrisu Tia, El-\nyse Lasser, Felicia Hill-Briggs, Jill Marsteller, and\nHadi Kharrazi. Assessing the availability of data on\nsocial and behavioral determinants in structured\nand unstructured electronic health records: A ret-\nrospective analysis of a multilevel health care sys-\ntem. JMIR Medical Informatics, 7(3):e13802, 2019.\ndoi: 10.2196/13802.\nAlistair E. W. Johnson, Tom J. Pollard, Lu Shen, Li-\nwei H. Lehman, Mengling Feng, Mohammad Ghas-\n5\n"}, {"page": 6, "text": "SDoH ICD-9 Code Predictions with LLMs\nsemi, Benjamin Moody, Peter Szolovits, Leo An-\nthony Celi, and Roger G. Mark. Mimic-iii, a freely\naccessible critical care database. Scientiﬁc Data, 3:\n160035, 2016. doi: 10.1038/sdata.2016.35.\nPaul Landes, Kunal Patel, Sean S. Huang, Adam\nWebb, Barbara Di Eugenio, and Cornelia Caragea.\nA New Public Corpus for Clinical Section Iden-\ntiﬁcation:\nMedSecId.\nIn Proceedings of the\n29th International Conference on Computational\nLinguistics, pages 3709–3721. International Com-\nmittee on Computational Linguistics, 2022. URL\nhttps://aclanthology.org/2022.coling-1.326.\nPaul Landes, Jimeng Sun, and Adam Cross. Integra-\ntion of large language models and traditional deep\nlearning for social determinants of health predic-\ntion. arXiv preprint arXiv:2505.04655, 2025. URL\nhttps://arxiv.org/abs/2505.04655.\nMI Multipayer Initiatives.\nSocial determinants of\nhealth: Discussion paper 101 for health care. Tech-\nnical report, MI Multipayer Initiatives, 2024. URL\nhttps://mimultipayerinitiatives.org.\nAc-\ncessed: 2025-08-25.\nJames Mullenbach, Sarah Wiegreﬀe, Jon Duke, Ji-\nmeng Sun, and Jacob Eisenstein. Explainable pre-\ndiction of medical codes from clinical text. In Pro-\nceedings of NAACL-HLT 2018, pages 1101–1111,\nNew Orleans, LA, 2018. Association for Compu-\ntational Linguistics. doi: 10.18653/v1/N18-1100.\nURL https://aclanthology.org/N18-1100/.\nJacqueline M. Torres, John Lawlor, Jeﬀrey D. Colvin,\nMarion R. Sills, Jessica L. Bettenhausen, Am-\nber Davidson, Gretchen J. Cutler, Matt Hall, and\nLaura M. Gottlieb.\nIcd social codes: An under-\nutilized resource for tracking social needs. Medi-\ncal Care, 55(9):810–816, 2017. doi: 10.1097/MLR.\n0000000000000764.\nJason Wei, Xuezhi Wang, Dale Schuurmans, Maarten\nBosma, Brian Ichter, Fei Xia, Ed Chi, Quoc Le,\nand Denny Zhou. Chain-of-thought prompting elic-\nits reasoning in large language models. 2023. URL\nhttps://arxiv.org/abs/2201.11903.\nChaoqi Yang, Zhenbang Wu, Patrick Jiang, Zhen\nLin,\nJunyi\nGao,\nBenjamin\nDanek,\nand\nJi-\nmeng\nSun.\nPyHealth:\nA\ndeep\nlearning\ntoolkit for healthcare predictive modeling.\nIn\nProceedings\nof\nthe\n27th\nACM\nSIGKDD\nIn-\nternational Conference on Knowledge Discovery\nand Data Mining (KDD) 2023,\n2023.\nURL\nhttps://github.com/sunlabuiuc/PyHealth.\n6\n"}, {"page": 7, "text": "SDoH ICD-9 Code Predictions with LLMs\nAppendix A. Final Prompt for SDoH Coding\n# SDOH\nMedical\nCoding Task\nYou are an expert medical\ncoder. Your\njob is to find\nSocial\nDeterminants\nof Health (SDOH) codes in clinical\nnotes.\n## CRITICAL\nPREDICTION\nRULES:\n1. IF YOU FIND\nEVIDENCE\nFOR A CODE\n-> YOU MUST\nPREDICT\nTHAT\nCODE\n2. BE\nCONSERVATIVE : Only\npredict\ncodes with\nSTRONG\nevidence\n3. Evidence\ndetection\n= Automatic\ncode\nprediction\n## CODE\nHIERARCHY\n- ABSOLUTELY\nCRITICAL :\nHOMELESS (V600 ) COMPLETELY\nEXCLUDES\nV602 :\n- [X] If you see homelessness\n-> ONLY\npredict V600 , NEVER V602\n- [X] \"Homeless\nand can ’t afford X\" -> STILL only\nV600\n- [OK] V602 is EXCLUSIVELY\nfor housed\npeople with\nexplicit\nfinancial\nhardship\nV602\nULTRA -STRICT\nREQUIREMENTS :\n- [OK] Must\nhave\nexact quotes: \"cannot\nafford\nmedications \", \"no money for food \"\n- [X] NEVER infer from : homelessness , unemployment , substance\nuse , mental health\n- [X] NEVER predict\nfrom : \"poor \", \" disadvantaged \", social\ncircumstances\n## Available\nICD -9 Codes:\nHousing & Resources :\n- V600 : Homeless (living on streets , shelters , hotels , motels , temporary\nhousing )\n- V602 : Cannot\nafford basic needs. ULTRA -STRICT RULES:\n- [OK] ONLY if EXPLICIT\nfinancial\nstatements :\n\"cannot\nafford\nmedications \", \"unable to pay for treatment \",\n\"no money for food \", \"financial\nhardship\npreventing\ncare \"\n- [X] NEVER predict\nfrom\nsocial\ncircumstances : substance\nabuse , unemployment ,\nmental health , divorce\n- [X] NEVER predict\nfrom\ndischarge\ninventory : \"no money/wallet\nreturned \"\n- [X] NEVER predict for\ninsurance / benefits\nmentions : \"on disability \", \"has\nMedicaid \"\n- V604 : No family/caregiver\navailable . CRITICAL\nRULES:\n- [X] NOT just \"lives alone\" or \"elderly \"\n- [OK] ONLY if: \"no family\ncontact \" AND \"no support \" AND \"no one to help \"\n- [X] NOT for: \"lives alone but daughter\nvisits\", \"independent \"\nEmployment\n& Legal:\n- V620 : Unemployed\n(current\nemployment\nstatus) -- EXPLICIT\nONLY\n- [OK] Predict\nonly if one of these exact employment -status phrases\nappears :\nunemploy (ed|ment ), jobless , no job , out of work , without work ,\nnot working , between jobs , on unemployment , receiving\nunemployment ,\nlaid off , fired , terminated , lost\njob\n- [X] Do NOT infer from \"used\nto work \", \"formerly\nemployed \", etc.\n- [X] Contradictions\n(block V620\nif nearby): \"employed \", \"works at\", \"working \",\netc.\n- [X] Non -employment\nuses of \"work \": \"work\nof breathing \", \"social work \", etc.\n- [X] Exclusions : retired , student , stay -at -home\nparent , medical\nleave\n- V625 : Legal problems . ACTIVE\nLEGAL PROCESSES\nONLY :\n- [OK] Criminal : arrest , jail , prison , parole , probation , charges , court case\n- [OK] Civil: restraining\norder , custody case , litigation\n7\n"}, {"page": 8, "text": "SDoH ICD-9 Code Predictions with LLMs\n- [OK] Guardianship : legal capacity\nhearing , court -appointed\nguardian\n- [OK] Child welfare : CPS/DCF removal , court -ordered\ncustody\n- [X] Do NOT code\nfor\nhistory of crime , substance\nuse , or\nhomelessness\nwithout\nlegal process\nHealth History :\n- V1541: Physical /sexual abuse (violence\nBY another\nperson). CRITICAL :\n- [OK] Physical\nviolence , sexual abuse , assault , domestic\nviolence , rape\n- [X] NOT accidents , falls , or when\npatient is aggressor\n- V1542: Pure\nemotional /psychological\nabuse. MUTUALLY\nEXCLUSIVE\nWITH\nV1541:\n- [OK] ONLY if NO physical /sexual abuse mentioned\nAND explicit\nemotional\nabuse:\nwitnessed\nviolence , verbal abuse , psychological\nabuse ,\nemotional\nmanipulation , intimidation\n- [X] NEVER predict if physical /sexual\nabuse mentioned\n- [X] NEVER predict\nboth\nV1541 AND V1542 for same\npatient\n- [X] Depression /anxiety /suicidality\nalone = NO CODE\nFamily History :\n- V6141: Family\nalcoholism\n- [OK] Kinship + alcohol\nterms (father alcoholic , mother ETOH abuse , etc .)\n- [X] Negations : \"denies\nfamily history of alcoholism \"\n- [X] NEVER for patient ’s own history\n## ENHANCED\nNEGATIVE\nEXAMPLES :\nV602\nFALSE POSITIVES\nTO AVOID:\n- [X] \"Homeless\npatient \" -> V600\nONLY\n- [X] \"Lives in shelter , gets\nfood\nstamps\" -> V600\nONLY\n- [X] \"Homeless , on\ndisability \" -> V600\nONLY\n- [X] \"No permanent\naddress , has Medicaid \" -> V600\nONLY\n- [X] \"Homeless\nand can ’t afford\nmedications \" -> V600\nONLY\n- [X] \"Lives in poverty \" -> NO CODE\n- [X] \" Financial\nstrain from\ndivorce \" -> NO CODE\nV604\nFALSE POSITIVES\nTO AVOID:\n- [X] \"82 year\nold lives alone\" -> NO CODE\n- [X] \"Lives by herself \" -> NO CODE\n- [X] \"Widowed , lives alone , son calls daily\" -> NO CODE\nV1542 FALSE POSITIVES\nTO AVOID:\n- [X] \"History of physical\nand sexual abuse\" -> V1541 ONLY\n- [X] \"PTSD\nfrom\nrape at age 7\" -> V1541 ONLY\n- [X] \" Childhood\nsexual abuse by uncle\" -> V1541 ONLY\n- [X] \"History of domestic\nabuse\" -> V1541 ONLY\n- [X] \" Depression\nand anxiety \" -> NO CODE\n- [X] \"Suicide\nattempts \" -> NO CODE\n- [X] \"History of abuse\" (unspecified ) -> NO CODE\n- [X] \"Recent\nargument\nwith\npartner\" -> NO CODE\nV1542 TRUE\nPOSITIVES\nTO CAPTURE:\n- [OK] \" Witnessed\nviolence\nas a child\" -> V1542\n- [OK] \" Emotionally\nabusive\nrelationship\nfor 14 years\" -> V1542\n- [OK] \"Verbal\nabuse from\ncontrolling\npartner\" -> V1542\n- [OK] \"Jealous\nand\ncontrolling\nbehavior \" -> V1542\n## CONFIDENCE\nRULES:\n8\n"}, {"page": 9, "text": "SDoH ICD-9 Code Predictions with LLMs\nHIGH\nCONFIDENCE\n(Predict ):\n- Direct\nstatement\n- Multiple\nevidence\npieces\n- Explicit\nmatching\nphrase\nLOW CONFIDENCE\n(Don ’t Predict ):\n- Ambiguous\nlanguage\n- Single weak\nindicator\n- Contradictory\nevidence\n## Key Rules:\n1. Precision\nover\nRecall: Better to miss a code\nthan\nfalsely\npredict\n2. Evidence -Driven: Strong\nevidence\nrequired\nfor\nprediction\n3. Multiple\ncodes allowed : But each\nneeds independent\nevidence\n4. Conservative\napproach : When\nin doubt , don ’t predict\n## Output Format:\nReturn\napplicable\ncodes separated\nby commas , or \"None \".\nExamples :\nV600 , V625\nNone\nFigure 2: Final optimized prompt used for admission-level SDoH ICD-9 V-code prediction. The prompt\nencodes hierarchy rules, precision-ﬁrst criteria, negative examples, and explicit output formatting.\nThis full text is provided to ensure reproducibility.\nAppendix B. Annotation Guide for SDoH ICD-9 V-codes\nB.1. V60.0: Homelessness\nDeﬁnition: Patient has no permanent residence or lives in transient arrangements such as streets, shelters,\nor motels.\nApproximate Synonyms: Homeless, currently homeless.\nApplies To: Hobos, tramps, vagabonds, social migrants, transients.\nInclusion Criteria: Explicit statements such as “Patient is homeless,” “Lives in shelter,” or “No permanent\naddress.”\nExclusion Criteria: Financial hardship only (V60.2), statements like “lives alone” or “poor” without loss\nof housing.\nExamples:\n• Positive: “Lives in a homeless shelter after eviction.”\n• Negative: “Struggling to pay rent but living with family.”\nB.2. V60.2: Inadequate Material Resources\nDeﬁnition: Patient lacks ﬁnancial means for necessities such as food, medication, or housing.\nApproximate Synonyms: Financial problem.\nApplies To: Economic problem, poverty not otherwise stated.\nInclusion Criteria: Explicit ﬁnancial statements (e.g., “Cannot aﬀord medications,” “No money for food”).\n9\n"}, {"page": 10, "text": "SDoH ICD-9 Code Predictions with LLMs\nExclusion Criteria: Any homelessness (V60.0), implicit hardship without direct evidence.\nExamples:\n• Positive: “Financial hardship preventing purchase of insulin.”\n• Negative: “Homeless and can’t aﬀord meds.” (V60.0 only)\nB.3. V60.4: No other household member able to render care\nDeﬁnition: Indicates no family or caregiver available to provide care or support.\nApplies To: Family member too ill or unsuited to render care, partner temporarily away, or person away\nfrom usual home.\nInclusion Criteria: Explicit lack of family support (e.g., “No family contact and no one to help with\ncare.”).\nExclusion Criteria: “Lives alone,” “independent,” or “widowed” without need for care.\nExamples:\n• Positive: “No family or friends available to assist after surgery.”\n• Negative: “Lives alone, independent in activities of daily life.”\nB.4. V62.0: Unemployment\nDeﬁnition: Patient currently lacks employment.\nExcludes: Main problem due to economic inadequacy (V60.2).\nInclusion Criteria: Direct mention of unemployment or job loss (“unemployed,” “laid oﬀ,” “no job”).\nExclusion Criteria: Retired, student, stay-at-home parent, or on medical leave; “used to work.”\nExamples:\n• Positive: “Unemployed, seeking work.”\n• Negative: “Previously worked as nurse.”\nB.5. V62.5: Legal Problems\nDeﬁnition: Current involvement with legal or judicial processes (criminal, civil, custody, or guardianship).\nApproximate Synonyms: Arrested, charged with crime, imprisonment, litigation, parole, bail, probation,\ncourt case pending.\nApplies To: Imprisonment, legal investigation, litigation, prosecution.\nInclusion Criteria: Active legal process (arrest, trial, custody case, guardianship hearing).\nExclusion Criteria: History of crime or incarceration without current legal process.\nExamples:\n• Positive: “Currently on probation after DUI arrest.”\n• Negative: “History of incarceration in 2010.”\nB.6. V15.41: History of Physical or Sexual Abuse\nDeﬁnition: Past exposure to physical or sexual violence inﬂicted by another person.\nApproximate Synonyms: History of physical abuse, sexual abuse, child abuse, domestic violence, rape.\nApplies To: Rape.\nInclusion Criteria: Mentions such as “History of sexual abuse” or “Physically abused by spouse.”\nExclusion Criteria: Accidents, self-injury, patient as aggressor, emotional abuse only (V15.42).\nExamples:\n10\n"}, {"page": 11, "text": "SDoH ICD-9 Code Predictions with LLMs\n• Positive: “Reports childhood sexual abuse by uncle.”\n• Negative: “Verbal abuse from partner.” (V15.42)\nB.7. V15.42: History of Emotional Abuse or Neglect\nDeﬁnition: History of psychological, emotional, or neglectful abuse without physical or sexual component.\nApproximate Synonyms: Emotional abuse, neglect, psychological abuse, verbal abuse, child neglect.\nApplies To: Neglect.\nInclusion Criteria: “Emotionally abusive relationship,” “childhood neglect,” “verbal abuse.”\nExclusion Criteria: Physical or sexual abuse (V15.41), depression/anxiety/PTSD alone.\nExamples:\n• Positive: “Endured years of emotional abuse from spouse.”\n• Negative: “PTSD from physical assault.” (V15.41)\nB.8. V61.41: Family History of Alcoholism\nDeﬁnition: Indicates alcoholism or alcohol dependence in the patient’s family.\nApproximate Synonyms: Family history of alcohol dependence, FHX of alcoholism, adult child of alco-\nholic.\nInclusion Criteria: Mentions such as “Father alcoholic,” “Mother with ETOH abuse,” or “Family history\nof alcoholism.”\nExclusion Criteria: Patient’s own alcohol use; negations (“Denies family history of alcoholism”).\nExamples:\n• Positive: “Mother and uncle both heavy drinkers.”\n• Negative: “Patient with long history of alcohol use disorder.”\nGeneral Annotation Rules\n1. Precision over recall: only label with explicit evidence.\n2. Mutual exclusions: V60.0 supersedes V60.2; V15.41 and V15.42 are mutually exclusive.\n3. Each code requires independent evidence.\n4. When in doubt, do not assign a code.\nFigure 3: Annotation guide used to label SDoH circumstances in clinical text for ICD-9 V-code prediction.\nEach section deﬁnes the code, domain, inclusion and exclusion criteria, and examples. Annotators\nmust use precision-ﬁrst judgment and follow hierarchy rules as outlined.\n11\n"}]}